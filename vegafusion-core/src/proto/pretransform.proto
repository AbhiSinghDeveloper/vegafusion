syntax = "proto3";
package pretransform;

import "tasks.proto";

message PreTransformOpts {
  optional uint32 row_limit = 1;
}

message PreTransformRequest {
  string spec = 1;
  PreTransformOpts opts = 2;
}

message PreTransformResponse {
  string spec = 1;
  repeated PreTransformRowLimitWarning warnings = 2;
}

message PreTransformRowLimitWarning {
  repeated tasks.Variable datasets = 1;
}

message PreTransformBrokenInteractivityWarning {
  repeated tasks.Variable vars = 1;
}

message PreTransformUnsupportedWarning {}

message PreTransformWarning {
  oneof warning_type {
    PreTransformRowLimitWarning row_limit = 1;
      PreTransformBrokenInteractivityWarning broken_interactivity = 2;
      PreTransformUnsupportedWarning unsupported = 3;
  }
}
